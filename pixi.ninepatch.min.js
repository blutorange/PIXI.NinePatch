"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(function(a,b){a.NinePatch=function(c){function d(e,f,g){_classCallCheck(this,d);var j=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));(1<arguments.length||e instanceof a.loaders.Resource)&&(e={width:f,height:g,resource:e});var k=e.resource;if(k instanceof a.loaders.Resource&&(k=k.textures),Array.isArray(k))for(var h=0;9>h;h++)j.addChild(k[h]);else j.addChild.apply(j,_toConsumableArray(Object.keys(k).filter(e.filter||function(){return!0}).sort().map(function(m){return new a.Sprite(k[m])})));j._targetWidth=e.width===b?j.children[0].width+j.children[1].width+j.children[2].width:e.width,j._targetHeight=e.height===b?j.children[0].height+j.children[3].height+j.children[6].height:e.height,j._originalDimensions=[];for(var h=0;9>h;h++)j._originalDimensions.push({w:j.children[h].width,h:j.children[h].height});if(j._minWidth=j._originalDimensions[0].w+j._originalDimensions[2].w,j._minHeight=j._originalDimensions[0].h+j._originalDimensions[2].h,j.addChild(new a.Container),j.children[2].anchor.set(1,0),j.children[5].anchor.set(1,0),j.children[6].anchor.set(0,1),j.children[7].anchor.set(0,1),j.children[8].anchor.set(1,1),j._bodyLeft=j.children[0].width,j._bodyTop=j.children[0].height,j._bodyRight=j.children[8].width,j._bodyBottom=j.children[8].height,e.resource instanceof a.loaders.Resource){var l=((e.resource.data||{}).meta||{}).content;l&&(j._bodyLeft=l.x,j._bodyTop=l.y,j._bodyRight=l.r,j._bodyBottom=l.b)}return j.smallStrategy=e.smallStrategy,j}return _inherits(d,c),_createClass(d,[{key:"onReady",value:function onReady(e){return e(),this}},{key:"update",value:function update(e,f){switch(this._smallStrategy){case a.NinePatch.SmallStrategy.UPSCALE:this.updateUpscale(e,f);break;case a.NinePatch.SmallStrategy.SCALE_CORNERS:this.updateScaleCorners(e,f);break;case a.NinePatch.SmallStrategy.IGNORE:this.updateKeep(e,f);break;default:this.updateScaleCorners(e,f);}var g=this.bodyDimension;this.children[9].position.set(g.x,g.y)}},{key:"updateKeep",value:function updateKeep(e,f){e===b&&(e=this._targetWidth),f===b&&(f=this._targetHeight),this._targetWidth=e,this._targetHeight=f;for(var g=0;9>g;++g)this.children[g].width=this._originalDimensions[g].w,this.children[g].height=this._originalDimensions[g].h;var h=1,j=1;e<this._minWidth&&(h=e/this._minWidth),f<this._minHeight&&(j=f/this._minHeight);var k;k=this.children[2],k.position.set(e,0),k=this.children[6],k.position.set(0,f),k=this.children[8],k.position.set(e,f),k=this.children[1],k.position.set(this.children[0].width,0),k.width=e-k.x-this.children[2].width,k=this.children[7],k.position.set(this.children[1].x,f),k.width=this.children[1].width,k=this.children[3],k.position.set(0,this.children[0].height),k.height=f-k.y-this.children[6].height,k=this.children[5],k.position.set(e,this.children[3].y),k.height=this.children[3].height,k=this.children[4],k.position.set(this.children[1].x,this.children[3].y),k.height=this.children[3].height,k.width=this.children[1].width}},{key:"updateScaleCorners",value:function updateScaleCorners(e,f){e===b&&(e=this._targetWidth),f===b&&(f=this._targetHeight),this._targetWidth=e,this._targetHeight=f;for(var g=0;9>g;++g)this.children[g].width=this._originalDimensions[g].w,this.children[g].height=this._originalDimensions[g].h;var h=1,j=1;e<this._minWidth&&(h=e/this._minWidth),f<this._minHeight&&(j=f/this._minHeight);var k;k=this.children[0],k.width*=h,k.height*=j,k=this.children[2],k.position.set(e,0),k.width*=h,k.height*=j,k=this.children[6],k.position.set(0,f),k.width*=h,k.height*=j,k=this.children[8],k.position.set(e,f),k.width*=h,k.height*=j,k=this.children[1],1>h?k.width=k.height=0:(k.position.set(this.children[0].width,0),k.width=e-k.x-this.children[2].width,k.height*=j),k=this.children[7],1>h?k.width=k.height=0:(k.position.set(this.children[1].x,f),k.width=this.children[1].width,k.height*=j),k=this.children[3],1>j?k.width=k.height=0:(k.visible=!0,k.position.set(0,this.children[0].height),k.width*=h,k.height=f-k.y-this.children[6].height),k=this.children[5],1>j?k.width=k.height=0:(k.position.set(e,this.children[3].y),k.width*=h,k.height=this.children[3].height),k=this.children[4],1>h||1>j?k.width=k.height=0:(k.position.set(this.children[1].x,this.children[3].y),k.height=this.children[3].height,k.width=this.children[1].width)}},{key:"updateUpscale",value:function updateUpscale(e,f){e===b&&(e=this._targetWidth),f===b&&(f=this._targetHeight),this._targetWidth=e,this._targetHeight=f;for(var h=0;9>h;++h)this.children[h].width=this._originalDimensions[h].w,this.children[h].height=this._originalDimensions[h].h;var j=1;if(e<this._minWidth||f<this._minHeight){var k=Math.ceil(this._minWidth/e),l=Math.ceil(this._minHeight/f),m=k*l;e*=m,f*=m,j=1/m}var g;if(g=this.children[0],g=this.children[1],g.position.set(this.children[0].width,0),g.width=e-g.x-this.children[2].width,g=this.children[2],g.position.set(e,0),g=this.children[3],g.position.set(0,this.children[0].height),g.height=f-g.y-this.children[6].height,g=this.children[4],g.position.set(this.children[1].x,this.children[3].y),g.height=this.children[3].height,g.width=this.children[1].width,g=this.children[5],g.position.set(e,this.children[3].y),g.height=this.children[3].height,g=this.children[6],g.position.set(0,f),g=this.children[7],g.position.set(this.children[1].x,f),g.width=this.children[1].width,g=this.children[8],g.position.set(e,f),1!=j){for(var n=0;9>n;++n)this.children[n].width*=j;this.children[1].x=this.children[4].x=this.children[7].x=this.children[0].width,this.children[2].x=this.children[5].x=this.children[8].x=this._targetWidth;for(var o=0;9>o;++o)this.children[o].height*=j;this.children[3].y=this.children[4].y=this.children[5].y=this.children[0].height,this.children[6].y=this.children[7].y=this.children[8].y=this._targetHeight}}},{key:"bodyDimension",get:function get(){return{x:this.bodyScaleX*this._bodyLeft,y:this.bodyScaleX*this._bodyTop,w:this.bodyWidth,h:this.bodyHeight}}},{key:"bodyWidth",get:function get(){return this._targetWidth-this.bodyScaleX*(this._bodyLeft+this._bodyRight)}},{key:"bodyHeight",get:function get(){return this._targetHeight-this.bodyScaleY*(this._bodyTop+this._bodyBottom)}},{key:"body",get:function get(){return this.children[9]}},{key:"content",get:function get(){return this._content}},{key:"width",get:function get(){return this.scale.x*this._targetWidth},set:function set(e){this.update(e,this._targetHeight)}},{key:"height",get:function get(){return this.scale.y*this._targetHeight},set:function set(e){this.update(this._targetWidth,e)}},{key:"bodyScaleX",get:function get(){return this._targetWidth<this._minWidth?this._targetWidth/this._minWidth:1}},{key:"bodyScaleY",get:function get(){return this._targetHeight<this._minHeight?this._targetHeight/this._minHeight:1}},{key:"smallStrategy",get:function get(){return this._smallStrategy},set:function set(e){this._smallStrategy=e,this.update()}}]),d}(a.Container),a.NinePatch.SmallStrategy={UPSCALE:0,SCALE_CORNERS:1,IGNORE:2}})(window.PIXI);
